const navToggle=document.getElementById("nav-toggle"),navMenu=document.getElementById("nav-menu");navToggle.addEventListener("click",()=>{navMenu.classList.toggle("active");const e=navToggle.querySelectorAll(".bar");e.forEach((e,t)=>{navMenu.classList.contains("active")?(t===0&&(e.style.transform="rotate(45deg) translate(5px, 5px)"),t===1&&(e.style.opacity="0"),t===2&&(e.style.transform="rotate(-45deg) translate(7px, -6px)")):(e.style.transform="none",e.style.opacity="1")})}),document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",t=>{e.textContent.trim()==="How to Order"&&(t.preventDefault(),openHowToOrderModal()),navMenu.classList.remove("active");const n=navToggle.querySelectorAll(".bar");n.forEach(e=>{e.style.transform="none",e.style.opacity="1"})})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){if(this.textContent.trim()==="How to Order")return;e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),window.addEventListener("scroll",()=>{const e=document.getElementById("navbar");window.scrollY>50?e.style.background="rgba(255, 255, 255, 0.98)":e.style.background="rgba(255, 255, 255, 0.95)"});function getGalleryImages(e){return e.gallery||[e.image]}function getSizeLabel(e){const t={S:"Small",M:"Medium",L:"Large",XL:"Extra Large",XXL:"Double XL"};return t[e]||e}function createWhatsAppMessage(e,t){const n=`Hello! I would like to order:

Product: ${e.title}
Code: ${e.code}
Size: ${t}
Price: ${e.price}

Please confirm availability and provide payment details.

Thank you!`;return encodeURIComponent(n)}function loadProducts(){document.querySelectorAll(".product-card").forEach(e=>{e.addEventListener("click",()=>{const n=parseInt(e.dataset.productId),t=window.productsData.find(e=>e.id===n);t&&showProductModal(t)})})}function showProductModal(e){const o=getGalleryImages(e),i=`
    <div class="product-gallery">
      <div class="main-image">
        <img id="main-product-image" src="${e.image}" alt="${e.title}" loading="lazy">
      </div>
      <div class="gallery-thumbnails">
        ${o.map((t,n)=>`
          <div class="thumbnail ${n===0?"active":""}" data-image="${t}">
            <img src="${t}" alt="${e.title} ${n+1}" loading="lazy" onerror="this.style.display='none'">
          </div>
        `).join("")}
      </div>
    </div>
  `,a=e.sizeChart?`
        <div class="size-chart">
            <h4>Size Chart (cm)</h4>
            <table class="size-table">
                <thead>
                    <tr>
                        <th>Size</th>
                        ${Object.keys(e.sizeChart.S).map(e=>`<th>${e.charAt(0).toUpperCase()+e.slice(1)}</th>`).join("")}
                    </tr>
                </thead>
                <tbody>
                    ${Object.entries(e.sizeChart).map(([e,t])=>`
                        <tr>
                            <td><strong>${e}</strong></td>
                            ${Object.values(t).map(e=>`<td>${e}</td>`).join("")}
                        </tr>
                    `).join("")}
                </tbody>
            </table>
        </div>
    `:"",t=document.createElement("div");t.className="product-modal",t.innerHTML=`
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div class="modal-image">
                    ${i}
                </div>
                <div class="modal-basic-info">
                    <h2 class="product-name">${e.title}</h2>
                    <p class="product-code">Product Code: ${e.code}</p>
                    <p class="product-type">Type: ${e.type}</p>
                    <p class="modal-price">${e.price}</p>

                    <div class="material-info">
                        <div class="material-item">
                            <span class="material-label">Base Material</span>
                            <span class="material-colon">:</span>
                            <span class="material-value">${e.baseMaterial}</span>
                        </div>
                        <div class="material-item">
                            <span class="material-label">Combination Material</span>
                            <span class="material-colon">:</span>
                            <span class="material-value">${e.combinationMaterial}</span>
                        </div>
                        <div class="material-item">
                            <span class="material-label">Finishing</span>
                            <span class="material-colon">:</span>
                            <span class="material-value">${e.finishing}</span>
                        </div>
                    </div>

                    <div class="size-selector">
                        <label>Select Size:</label>
                        <select id="size-select">
                            ${Object.keys(e.sizeChart||{}).map(e=>`<option value="${e}" ${e==="M"?"selected":""}>${e} - ${getSizeLabel(e)}</option>`).join("")}
                        </select>
                    </div>

                    <button class="order-whatsapp-btn" onclick="orderViaWhatsApp('${e.code}', '${e.title}', '${e.price}')">
                        <i class="fab fa-whatsapp"></i> Order via WhatsApp
                    </button>
                </div>
            </div>

            <div class="modal-details">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="description">Description</button>
                    <button class="tab-btn" data-tab="size-chart">Size Chart</button>
                    ${e.ulosMeaning?'<button class="tab-btn" data-tab="ulos-meaning">Cultural Meaning</button>':""}
                </div>

                <div class="tab-content">
                    <div class="tab-pane active" id="description">
                        <div class="description-content">
                            ${e.description.split(`
`).map(e=>e.trim()?`<p>${e}</p>`:"").join("")}
                        </div>
                    </div>

                    <div class="tab-pane" id="size-chart">
                        ${a}
                    </div>

                    ${e.ulosMeaning?`
                        <div class="tab-pane" id="ulos-meaning">
                            <div class="ulos-meaning-content">
                                <h4>Cultural Significance</h4>
                                <p>${e.ulosMeaning}</p>
                            </div>
                        </div>
                    `:""}
                </div>
            </div>
        </div>
    `,document.body.appendChild(t);const n=t.querySelectorAll(".thumbnail"),r=t.querySelector("#main-product-image");n.forEach(e=>{e.addEventListener("click",()=>{n.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.image;r.src=t})});const s=t.querySelectorAll(".tab-btn"),c=t.querySelectorAll(".tab-pane");s.forEach(e=>{e.addEventListener("click",()=>{const n=e.dataset.tab;s.forEach(e=>e.classList.remove("active")),c.forEach(e=>e.classList.remove("active")),e.classList.add("active"),t.querySelector(`#${n}`).classList.add("active")})});const l=t.querySelector(".close-modal");l.addEventListener("click",()=>{document.body.removeChild(t)}),t.addEventListener("click",e=>{e.target===t&&document.body.removeChild(t)})}function orderViaWhatsApp(e,t,n){const s=document.getElementById("size-select"),o=s?s.value:"M",i=`Hello! I would like to order:

Product: ${t}
Code: ${e}
Size: ${o}
Price: ${n}

Please confirm availability and provide payment details.

Thank you!`,a="6281188030203",r=encodeURIComponent(i),c=`https://wa.me/${a}?text=${r}`;window.open(c,"_blank")}function openEventModal(e,t,n,s){const o=document.createElement("div");o.className="event-modal",o.innerHTML=`
    <div class="event-modal-content">
      <button class="event-modal-close" onclick="closeEventModal()">&times;</button>
      <div class="event-modal-body">
        <div class="event-modal-hero">
          <img src="${n}" alt="${t}" onerror="this.src='https://images.unsplash.com/photo-1558769132-cb1aea458c5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'">
        </div>
        <div class="event-modal-content-text">
          <h2 class="event-modal-title">${t}</h2>
          <div class="event-modal-description">
            ${s.replace(/\n\n/g,"||PARAGRAPH_BREAK||").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;").split("||PARAGRAPH_BREAK||").map(e=>{const t=e.trim();return t===""?"":`<p style="white-space: pre-wrap; margin-bottom: 15px;">${t}</p>`}).filter(e=>e!=="").join("")}
          </div>
        </div>
      </div>
    </div>
  `,document.body.appendChild(o),setTimeout(()=>{o.classList.add("active")},10),o.addEventListener("click",e=>{e.target===o&&closeEventModal()}),document.body.style.overflow="hidden"}function closeEventModal(){const e=document.querySelector(".event-modal");e&&(e.classList.remove("active"),setTimeout(()=>{document.body.removeChild(e),document.body.style.overflow="auto"},300))}document.addEventListener("keydown",e=>{e.key==="Escape"&&(closeEventModal(),closeHowToOrderModal())});function openHowToOrderModal(){const e=document.createElement("div");e.className="how-to-order-modal",e.innerHTML=`
    <div class="how-to-order-modal-content">
      <div class="how-to-order-modal-header">
        <h2 class="how-to-order-modal-title">How to Order</h2>
        <button class="close-how-to-order-modal" onclick="closeHowToOrderModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="how-to-order-modal-body">
        <div class="steps-container-modal">
          <div class="step-modal">
            <div class="step-number">01</div>
            <div class="step-icon-modal">
              <i class="fas fa-search"></i>
            </div>
            <h3>Browse Collection</h3>
            <p>Explore our curated selection of premium ulos pieces. Click on any product to view detailed information and gallery.</p>
          </div>
          <div class="step-modal">
            <div class="step-number">02</div>
            <div class="step-icon-modal">
              <i class="fas fa-ruler"></i>
            </div>
            <h3>Select Size</h3>
            <p>Choose your preferred size using our comprehensive size guide available in each product modal.</p>
          </div>
          <div class="step-modal">
            <div class="step-number">03</div>
            <div class="step-icon-modal">
              <i class="fab fa-whatsapp"></i>
            </div>
            <h3>Place Order</h3>
            <p>Click "Order via WhatsApp" to send your product details directly to our customer service team.</p>
          </div>
          <div class="step-modal">
            <div class="step-number">04</div>
            <div class="step-icon-modal">
              <i class="fas fa-check-circle"></i>
            </div>
            <h3>Confirmation</h3>
            <p>Receive order confirmation, payment instructions, and delivery details from our team.</p>
          </div>
        </div>
        <div class="whatsapp-contact-modal">
          <div class="contact-header">
            <i class="fab fa-whatsapp contact-icon"></i>
            <h4>Need Assistance?</h4>
          </div>
          <p>Contact our customer service team directly for personalized support and immediate assistance.</p>
          <a href="https://wa.me/6281188030203" class="whatsapp-link-modal" target="_blank">
            <i class="fab fa-whatsapp"></i>
            <span>Chat with Us</span>
            <small>+62 811-8803-0203</small>
          </a>
        </div>
      </div>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.classList.add("active")},10),e.addEventListener("click",t=>{t.target===e&&closeHowToOrderModal()}),document.body.style.overflow="hidden"}function closeHowToOrderModal(){const e=document.querySelector(".how-to-order-modal");e&&(e.classList.remove("active"),setTimeout(()=>{document.body.removeChild(e),document.body.style.overflow="auto"},300))}document.querySelector(".cta-button").addEventListener("click",()=>{document.querySelector("#products").scrollIntoView({behavior:"smooth"})});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions),lazyImageObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.dataset.src&&(t.src=t.dataset.src,t.classList.remove("lazy"),lazyImageObserver.unobserve(t))}})},{rootMargin:"50px 0px",threshold:.01});document.addEventListener("DOMContentLoaded",()=>{loadProducts(),document.querySelectorAll(".product-card, .step, .about-content").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="all 0.6s ease",observer.observe(e)}),document.querySelectorAll("img.lazy").forEach(e=>{lazyImageObserver.observe(e)});const e=document.querySelectorAll(".social-links a");console.log("Social links found:",e.length),e.forEach((e)=>{const n=e.href.includes("instagram")?"Instagram":e.href.includes("tiktok")?"TikTok":"Unknown";console.log(`${n} link found:`,e.href),e.style.pointerEvents="auto",e.style.cursor="pointer",e.addEventListener("click",function(e){console.log(`${n} link clicked:`,this.href),e.defaultPrevented||(window.open(this.href,"_blank","noopener,noreferrer"),e.preventDefault())})}),e.length===0&&console.log("No social links found")}),document.addEventListener("mousemove",e=>{const t=document.querySelector(".custom-cursor");if(!t){const e=document.createElement("div");e.className="custom-cursor",document.body.appendChild(e)}})